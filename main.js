(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t,i,n,l,s,d=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e.elem,this.sliderShowNumberEl=e.sliderShowNumberEl,this.imgInSlide=e.imgInSlide,this.imgNumber=e.imgNumber,this.initialOffset=0,this.lastSlide=0,this.startX=0,this.dX=0,this.dXPrev=0,this.shiftX=0,this.context=this,this.allSlideElements=null,this.sliderLeftBound=0,this.sliderRightBound=0,this.pointerMoveBind=this.pointerMove.bind(this.context),this.pointerUpBind=this.endMove.bind(this.context),this.getSlideBind=this.getSlide.bind(this.context),this.init(),this.listener()}var i,n;return i=t,(n=[{key:"init",value:function(){this.elem.innerHTML="";for(var e=0;e<this.imgNumber;e+=1)this.elem.innerHTML+='<li class="main__items__item transit" style="min-width: calc('.concat(100/this.imgInSlide,'%)">\n  <img src="./img/').concat(Math.floor(5*Math.random()+1),'.jpg" alt="item ').concat(e,'">\n  <h3 class="main__items__item__title center">item ').concat(e+1,"</h3>\n</li>");this.initialOffset=this.elem.firstElementChild.clientLeft}},{key:"listener",value:function(){this.sliderShowNumberEl.addEventListener("input",this.getSlideBind),this.elem.addEventListener("selectstart",(function(e){return e.preventDefault()})),this.elem.addEventListener("dragstart",(function(e){return e.preventDefault()})),this.elem.addEventListener("mousedown",this.mouseDown.bind(this.context))}},{key:"pointerMove",value:function(e){this.dX=e.pageX-this.startX,this.moveAt(e.pageX)}},{key:"moveAt",value:function(e){var t=this;this.dX<this.dXPrev&&this.allSlideElements[this.allSlideElements.length-1].getBoundingClientRect().right<this.sliderRightBound||this.allSlideElements[0].getBoundingClientRect().left>this.sliderLeftBound||(this.dXPrev=this.dX,this.allSlideElements.forEach((function(i){i.firstElementChild.classList.remove("slider-show"),i.style.left="".concat(e-t.shiftX,"px")})))}},{key:"endMove",value:function(e){var t=this;setTimeout((function(){t.allSlideElements.forEach((function(i){Math.abs(Math.ceil((e.pageX-t.shiftX)/i.clientWidth))<t.imgNumber-t.imgInSlide+1&&(i.style.left="".concat(e.pageX-t.shiftX-(e.pageX-t.shiftX)%i.clientWidth,"px"))})),t.allSlideElements[t.allSlideElements.length-1].getBoundingClientRect().right<t.sliderRightBound?t.allSlideElements.forEach((function(e){e.style.left="".concat(-e.clientWidth*(t.imgNumber-t.imgInSlide),"px")})):t.allSlideElements[0].getBoundingClientRect().left>t.sliderLeftBound&&t.allSlideElements.forEach((function(e){e.style.left="".concat(0)}))}),200),document.removeEventListener("mousemove",this.pointerMoveBind),document.removeEventListener("mouseup",this.pointerUpBind)}},{key:"mouseDown",value:function(e){var t=this.elem.getBoundingClientRect();this.sliderLeftBound=t.left,this.sliderRightBound=t.right,e.target.closest("li")&&(this.allSlideElements=this.elem.querySelectorAll("li"),this.startX=e.pageX,this.sliderLeftBound=this.elem.getBoundingClientRect().left,this.shiftX=e.clientX-this.allSlideElements[0].getBoundingClientRect().left+this.sliderLeftBound,document.addEventListener("mousemove",this.pointerMoveBind),document.addEventListener("mouseup",this.pointerUpBind))}},{key:"getSlide",value:function(){var e=this,t=Number(this.sliderShowNumberEl.value);t>this.imgNumber&&(t=this.imgNumber,this.sliderShowNumberEl.value="".concat(t)),this.allSlideElements||(this.allSlideElements=this.elem.querySelectorAll("li")),this.lastSlide&&this.allSlideElements[this.lastSlide-1].firstElementChild.classList.remove("slider-show"),this.lastSlide=t,this.allSlideElements.forEach((function(i,n){n===t-1&&i.firstElementChild.classList.add("slider-show"),t+e.imgInSlide>e.imgNumber+1?i.style.left="".concat(e.initialOffset-i.clientWidth*(e.imgNumber-e.imgInSlide),"px"):i.style.left="".concat(e.initialOffset-i.clientWidth*(t-1),"px")}))}},{key:"cleanUp",value:function(){this.sliderShowNumberEl.removeEventListener("input",this.getSlideBind)}}])&&e(i.prototype,n),t}();function r(){var e=Number(n.value),r=Number(i.value);if(r>e&&(i.value="".concat(e),r=e),s){if(r===s.imgInSlide&&e===s.imgNumber)return;s.cleanUp(),s=null}s=new d({elem:t,imgInSlide:r,imgNumber:e,sliderShowNumberEl:l})}window.addEventListener("load",(function(){t=document.getElementById("carousel"),i=document.getElementById("img-per-slide"),n=document.getElementById("img-number"),l=document.getElementById("show-slide"),n&&i&&t&&l&&(s=new d({elem:t,imgInSlide:Number(i.value),imgNumber:Number(n.value),sliderShowNumberEl:l}),n.addEventListener("input",r),i.addEventListener("input",r))}))})();